#!/bin/bash

base=$HOME/git/Dotfiles

if [ $# -ne 1 ]; then
	echo "Usage: dots save|deploy (--force)"
	exit 1
fi

cd $base
if [ "$1" = "save" ] || [ "$1" = "push" ] || [ "$1" = "commit" ]; then
	comment=`git diff --name-only`
	git add . >/dev/null
	git commit -m "$comment" >/dev/null
	git push >/dev/null
elif [ "$1" = "deploy" ] || [ "$1" = "pull" ]; then
	if git status 2>/dev/null | grep -q clean; then
		git pull >/dev/null
	elif [ "$2" = "--force" ]; then
		git reset --hard >/dev/null
		git pull >/dev/null
	else
		echo "You have unsaved changes in your dotfiles"
	fi
else
	echo "Usage: dots save|deploy (--force)"
	exit 1
fi

